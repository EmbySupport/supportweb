<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Besch&#228;digte Datenbank | Emby Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Besch&#228;digte Datenbank | Emby Documentation ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/socialbar.css">
    <link rel="stylesheet" href="../../styles/header.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,100italic,300italic,400italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.2.0/css/all.min.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:uid" content="Corrupt-Database">
    <meta name="searchOption" content="noindex">
    <meta property="docfx:rel" content="../../">
    
    <script type="text/javascript" src="../../nav.js"></script>
    <script type="text/javascript" src="toc.js"></script>
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <div class="mb-socials-heading" style="height: 40px;">
        	<div class="mb-socials-heading-inner container">
        		<div class="mb-socials-heading-right">
        			<div class="mb-socials-list">
                          
        				<div class="mb-socials-item facebook">
        					<a class="mb-socials-item-link" target="_blank" href="https://facebook.com/embyapp"></a>
        					<div class="mb-socials-item-popup">
        						<span>Facebook</span>
        					</div>
        				</div><div class="mb-socials-item twitter">
        					<a class="mb-socials-item-link" target="_blank" href="https://twitter.com/embyapp"></a>
        					<div class="mb-socials-item-popup">
        						<span>Twitter</span>
        					</div>
        				</div>
        				<div class="mb-socials-item pinterest">
        					<a class="mb-socials-item-link" target="_blank" href="https://www.pinterest.com/emby0240/emby-news/"></a>
        					<div class="mb-socials-item-popup">
        						<span>Pinterest</span>
        					</div>
        				</div>
        				<div class="mb-socials-item tumblr">
        					<a class="mb-socials-item-link" target="_blank" href="https://embyapp.tumblr.com/"></a>
        					<div class="mb-socials-item-popup">
        						<span>Tumblr</span>
        					</div>
        				</div>
        				<div class="mb-socials-item github">
        					<a class="mb-socials-item-link" target="_blank" href="https://github.com/MediaBrowser"></a>
        					<div class="mb-socials-item-popup">
        						<span>GitHub</span>
        					</div>
        				</div><div class="mb-socials-item rss">
        					<a class="mb-socials-item-link" target="_blank" href="https://emby.media/blog.xml"></a>
        					<div class="mb-socials-item-popup">
        						<span>RSS</span>
        					</div>
        				</div>
                          
        			</div>
        		</div>
        	</div>
        </div>
        <div class="container">
        	<nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
        		  
        		  <a class="navbar-brand" href="/">
        		    <img id="logo" class="svg" src="../../images/logo.png" alt="">
        		  </a>
        		  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
        			<span class="sr-only">Toggle navigation</span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
        		  </button>
        		<div class="collapse navbar-collapse" id="navbar">
        			
        			<ul class="nav level1 navbar-nav">
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/about.html" title="About">About</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/blog.html" title="Blog">Blog</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/download.html" title="Download">Download</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/premiere.html" title="Emby Premiere">Emby Premiere</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="http://app.emby.media/" title="Sign In">Sign In</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="../../index.html" title="Support">Support</a>
        			      </li>
        			</ul>		</div>
        	</nav>
        </div>
        <div class="nav-overlay d-none"></div>        
        <div class="subnav navbar navbar-default">
          <div class="container">
            <div class="hide-when-search" id="breadcrumb">
        	  <ul class="breadcrumb">
        		<li></li>
        	  </ul>
        	</div>
        
        	<div class="breadcrumpsearch">
        	  <form class="navbar-form navbar-right" role="search" id="search">
        		<div class="form-group">
        		  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
        		</div>
        	  </form>
        	</div>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Corrupt-Database">
<h1>Beschädigte Datenbank</h1>


<p>Wenn Ihre Server-Logdatei SQLite-Fehler wie im folgenden Beispiel zeigt, benötigt Ihre library.db-Datei Aufmerksamkeit.</p>
<p><code>SQLitePCL.pretty.SQLiteException</code></p>
<h3 id="was-kann-dies-verursachen">Was kann dies verursachen</h3>
<p>Typische Ursachen dafür sind plötzliche und abrupte Beendigungen des Emby-Serverprozesses, wie z.B. ein Stromausfall, Absturz des Betriebssystems, erzwungenes Beenden des Serverprozesses usw.</p>
<h3 id="speicherort-der-datenbankdateien-finden">Speicherort der Datenbankdateien finden</h3>
<p>Dies lässt sich leicht über das obere Menü direkt über dem Server-Informationsfeld finden.</p>
<p><img src="images/server/corrupt_db1.png" alt="Corrupt Db1"></p>
<p>Klicken Sie auf Serverinfo anzeigen</p>
<p><img src="images/server/corrupt_db2.png" alt="Corrupt Db2"></p>
<p>Wir benötigen den Standort der Library-Datenbankdateien. Sie befinden sich im &quot;data&quot;-Verzeichnis unter dem ersten angezeigten Pfad.</p>
<p><code>/var/lib/emby/data</code> ist der zu verwendende Speicherort für jede der untenstehenden Lösungen.</p>
<h2 id="lösungsansätze-in-dieser-reihenfolge-ausprobieren">Lösungsansätze in dieser Reihenfolge ausprobieren</h2>
<h3 id="entfernen-von-datenbanksperren">Entfernen von Datenbanksperren</h3>
<ol>
<li><p>Emby herunterfahren</p>
</li>
<li><p>Zum Ordner navigieren, der Ihre Datenbankdatei enthält</p>
</li>
<li><p>Löschen von library.db-shm &amp; library.db-wal</p>
</li>
<li><p>Emby neu starten</p>
</li>
</ol>
<p>Überprüfen Sie Ihren Server-Log auf SQLite-Fehler und fahren Sie nur mit dem nächsten Schritt fort, wenn nötig</p>
<h3 id="datenbankintegrität-überprüfen-und-datenbank-wiederherstellen">Datenbankintegrität überprüfen und Datenbank wiederherstellen</h3>
<p>Dieser Schritt erfordert die Verwendung eines SQLite-Editors, der von sqlite.org heruntergeladen werden kann. Wenn Sie einen grafischen Editor bevorzugen, können Sie den DB Browser for SQLite herunterladen, der für die meisten Plattformen verfügbar ist.</p>
<h4 id="integritätsprüfung-durchlaufen">Integritätsprüfung durchlaufen</h4>
<p>Öffnen Sie die library.db-Datenbank und führen Sie den folgenden SQL-Befehl aus:</p>
<p><code>PRAGMA integrity_check</code></p>
<p>Wenn Sie das Befehlszeilen-Tool verwenden, versuchen Sie folgendes</p>
<p><code>sqlite3 library.db &quot;PRAGMA integrity_check&quot;</code></p>
<p>Dies sollte eine Integritätsprüfung mit &quot;OK&quot; zurückgeben, ohne dass Fehler gemeldet werden. Wenn Fehler gemeldet werden, müssen wir die Datenbank wiederherstellen.</p>
<h4 id="librarydb-wiederherstellen">library.db wiederherstellen</h4>
<p>Was wir tun müssen, ist, alle Daten aus der Datenbank in eine Textdatei zu exportieren und diese dann in eine neu erstellte Datenbank zu laden. Dies kann mit einem einzigen Befehl unter Verwendung des SQLite-Befehlszeileneditors erfolgen.</p>
<ol>
<li><p>Führen Sie folgenden Befehl aus<br>
<code>sqlite3 library.db &quot;.recover&quot; | sqlite3 library-recovered.db</code><br>
(dies kann eine Weile dauern, warten Sie bitte, bis der Vorgang abgeschlossen ist)</p>
</li>
<li><p>Wir werden nun die Integrität unserer wiederhergestellten Datenbank prüfen (wie oben) unter Verwendung von</p>
<p><code>sqlite3 library-recovered.db &quot;PRAGMA integrity_check&quot;</code></p>
</li>
</ol>
<p>Dies sollte eine Integritätsprüfung mit &quot;OK&quot; zurückgeben, ohne dass Fehler gemeldet werden. Wenn Fehler gemeldet werden, melden Sie dies bitte im Forum, bevor Sie mit dem Zurücksetzen der Library-Datenbank fortfahren. Wenn &quot;OK&quot; und keine Fehler gemeldet werden, fahren Sie mit Schritt 3 fort.</p>
<ol start="3">
<li><p>Erstellen Sie eine Kopie von både library.db und library-recovered.db</p>
</li>
<li><p>Benennen Sie library.db in library.old um</p>
</li>
<li><p>Benennen Sie library-recovered.db in library.db um</p>
</li>
<li><p>Emby Server neu starten</p>
</li>
</ol>
<p>Überprüfen Sie Ihren Server-Log auf SQLite-Fehler und fahren Sie nur mit dem nächsten Schritt fort, wenn nötig</p>
<h3 id="schritte-zum-zurücksetzen-der-library-datenbank--neu-laden">Schritte zum Zurücksetzen der Library-Datenbank &amp; Neu Laden</h3>
<ol>
<li><p>Emby herunterfahren</p>
</li>
<li><p>Wechseln Sie zum oben gefundenen Speicherort der Datenbank, der Ihre Datenbankdateien enthält</p>
</li>
<li><p>Benennen Sie library.db in library.corrupt um</p>
</li>
<li><p>Emby neu starten</p>
</li>
<li><p>Führen Sie einen vollständigen Library-Scan durch</p>
</li>
</ol>


            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix sdkversion" id="affix">
                <h5>On this Page</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to Top</a>
            </span>
            2025 © EMBY LLC.  Please see our <a class="lnk" href="https://emby.media/terms.html">terms of use</a> and <a class="lnk" href="https://emby.media/privacy.html">privacy policy</a>.
      
          <span class="contribution">
                <a href="https://github.com/EmbySupport/Emby.Docs/issues/new?title=&amp;body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23%23%23%23%20Article%20Details%0A%0A**Do%20not%20remove%20this%20section**%0A%0A*%20uid%3A%20Corrupt-Database%0A*%20Title%3A%20Besch%C3%A4digte%20Datenbank%0A*%20Article%3A%20https%3A%2F%2Fgithub.com%2FEmbySupport%2FEmby.SupportWeb%2Fblob%2Fmaster%2FEmby.SupportWeb%2Fcontent%2Fsupport%2Fde%2Farticles%2FCorrupt-Database.md%0A*%20LegacyUrl%3A%20https%3A%2F%2Fsupport.emby.media%2Fsupport%2Fsolutions%2Farticles%2F44002210894-corrupt-database%0A" class="contribution-link" title="Feedback on this article"><div class="far fa-comment-alt fa-sm"></div></a>
                <a href="https://github.com/EmbySupport/Emby.SupportWeb/blob/master/Emby.SupportWeb/content/support/de/articles/Corrupt-Database.md/#L1" class="contribution-link " title="View article source"><div class="far fa-edit fa-sm"></div></a>
          </span>
      
          
        
      </div></div></footer>
    
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../searchIndex.js"></script>
    <script type="text/javascript" src="../../styles/lunr.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </div></body>
</html>
