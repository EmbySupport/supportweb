<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Emby-Server | Emby Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Emby-Server | Emby Documentation ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/socialbar.css">
    <link rel="stylesheet" href="../../styles/header.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,100italic,300italic,400italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:uid" content="">
    
    <meta property="docfx:rel" content="../../">
    
    <script type="text/javascript" src="../../nav.js"></script>
    <script type="text/javascript" src="toc.js"></script>
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <div class="mb-socials-heading" style="height: 40px;">
        	<div class="mb-socials-heading-inner container">
        		<div class="mb-socials-heading-right">
        			<div class="mb-socials-list">
                          
        				<div class="mb-socials-item facebook">
        					<a class="mb-socials-item-link" target="_blank" href="https://facebook.com/embyapp"></a>
        					<div class="mb-socials-item-popup">
        						<span>Facebook</span>
        					</div>
        				</div><div class="mb-socials-item twitter">
        					<a class="mb-socials-item-link" target="_blank" href="https://twitter.com/embyapp"></a>
        					<div class="mb-socials-item-popup">
        						<span>Twitter</span>
        					</div>
        				</div>
        				<div class="mb-socials-item pinterest">
        					<a class="mb-socials-item-link" target="_blank" href="https://www.pinterest.com/emby0240/emby-news/"></a>
        					<div class="mb-socials-item-popup">
        						<span>Pinterest</span>
        					</div>
        				</div>
        				<div class="mb-socials-item tumblr">
        					<a class="mb-socials-item-link" target="_blank" href="https://embyapp.tumblr.com/"></a>
        					<div class="mb-socials-item-popup">
        						<span>Tumblr</span>
        					</div>
        				</div>
        				<div class="mb-socials-item github">
        					<a class="mb-socials-item-link" target="_blank" href="https://github.com/MediaBrowser"></a>
        					<div class="mb-socials-item-popup">
        						<span>GitHub</span>
        					</div>
        				</div><div class="mb-socials-item rss">
        					<a class="mb-socials-item-link" target="_blank" href="https://emby.media/blog.xml"></a>
        					<div class="mb-socials-item-popup">
        						<span>RSS</span>
        					</div>
        				</div>
                          
        			</div>
        		</div>
        	</div>
        </div>
        <div class="container">
        	<nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
        		  
        		  <a class="navbar-brand" href="../../index.html">
        		    <img id="logo" class="svg" src="../../images/logo.png" alt="">
        		  </a>
        		  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
        			<span class="sr-only">Toggle navigation</span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
        		  </button>
        		<div class="collapse navbar-collapse" id="navbar">
        			
        			<ul class="nav level1 navbar-nav">
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/about.html" title="About">About</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/blog.html" title="Blog">Blog</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/download.html" title="Download">Download</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/premiere.html" title="Emby Premiere">Emby Premiere</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="http://app.emby.media/" title="Sign In">Sign In</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="../../support/index.html" title="Support">Support</a>
        			      </li>
        			</ul>		</div>
        	</nav>
        </div>
        <div class="nav-overlay d-none"></div>        
        <div class="subnav navbar navbar-default">
          <div class="container">
            <div class="hide-when-search" id="breadcrumb">
        	  <ul class="breadcrumb">
        		<li></li>
        	  </ul>
        	</div>
        
        	<div class="breadcrumpsearch">
        	  <form class="navbar-form navbar-right" role="search" id="search">
        		<div class="form-group">
        		  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
        		</div>
        	  </form>
        	</div>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1>Emby-Server</h1>


<p><img src="http://i.imgur.com/MHQCm40.png" alt="Alt text"></p>
<ul>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#supported-tags">Supported Tags</a></li>
<li><a href="#issues">Issues</a></li>
</ul>
</li>
<li><a href="#getting-started">Getting started</a>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#installation">Installation</a>
<ul>
<li><a href="#docker-hub">Docker Hub</a>
<ul>
<li><a href="#installation-as-current-user">Installation as current user</a></li>
<li><a href="#installation-as-other-user">Installation as other user</a></li>
</ul>
</li>
<li><a href="#github">GitHub</a></li>
<li><a href="#initial-configuration">Initial Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#maintenance">Maintenance</a>
<ul>
<li><a href="#upgrading">Upgrading</a></li>
<li><a href="#automatic-upgrades">Automatic Upgrades</a></li>
<li><a href="#removal">Removal</a></li>
<li><a href="#shell-access">Shell Access</a></li>
</ul>
</li>
<li><a href="#unraid">unRAID</a>
<ul>
<li><a href="#unraid-installation">Installation</a></li>
<li><a href="#unraid-automatic-upgrades">Automatic Upgrades</a></li>
</ul>
</li>
<li><a href="#technical-information">Technical Information</a>
<ul>
<li><a href="#environment-variables">Environment Variables</a>
<ul>
<li><a href="#adjusting-variables">Adjusting Variables</a></li>
</ul>
</li>
<li><a href="#volumes">Volumes</a></li>
</ul>
</li>
<li><a href="#manual-run-and-installation">Manual Run and Installation</a></li>
<li><a href="#migrating-your-data-from-an-existing-installation">Migrating your data from an existing installation</a></li>
<li><a href="#license">License</a></li>
</ul>
<h1 id="introduction">Introduction:</h1>
<p>Emby Server is a home media server built on top of other popular open source
technologies such as Service Stack, jQuery, jQuery mobile, and Mono.</p>
<p>It features a REST-based API with built-in documention to facilitate client
development. We also have client libraries for our API to enable rapid
development.</p>
<p>This subfolder contains all necessary files to build a <a href="https://www.docker.com/">Docker</a> image for <a href="https://github.com/mediabrowser/emby">embyserver</a>.</p>
<h2 id="supported-tags">Supported Tags:</h2>
<ul>
<li>latest - latest stable release</li>
<li>beta - latest beta release</li>
<li>dev  - latest dev release</li>
<li>armv7 - latest stable release for armv7 or armhf</li>
<li>aarch64 - latest stable release for armv8 or aarch64</li>
</ul>
<h2 id="issues">Issues:</h2>
<p>Before reporting your issue please try updating Docker to the latest version
and check if it resolves the issue. Refer to the Docker <a href="https://docs.docker.com/installation">installation guide</a> for instructions.</p>
<p>SELinux users should try disabling SELinux using the command <code>setenforce 0</code> to see if it resolves the issue.</p>
<p>If the above recommendations do not help then <a href="../../issues/new">report your issue</a> along with the following information:</p>
<ul>
<li>Output of the <code>docker version</code> and <code>docker info</code> commands</li>
<li>The <code>docker run</code> command or <code>docker-compose.yml</code> used to start the image. Mask out the sensitive bits.</li>
<li>Please state if you are using <a href="http://www.boot2docker.io">Boot2Docker</a>, <a href="https://www.virtualbox.org">VirtualBox</a>, etc.</li>
</ul>
<h1 id="getting-started">Getting started:</h1>
<h2 id="installation">Installation:</h2>
<h3 id="docker-hub"><a href="https://hub.docker.com/r/emby/embyserver/">Docker Hub</a>:</h3>
<p>It is recommended you install directly from the <a href="https://hub.docker.com/r/emby/embyserver/">Docker Hub</a>.</p>
<p>The installation process and scripts are very versatile and can be adjusted by
passing the right combination of variables and arguments to each of the
commands.</p>
<p>The following examples should cover most scenarios, in each, a wrapper script
will be installed on the host that should ease creation and management of the
containerized application. When executing the script it will create a container
named <code>embyserver</code>. Additionally, the script will ensure that this container gets
setup with the appropriate environment variables and volumes each time it is
executed.</p>
<h4 id="installation-as-current-user">Installation as current user:</h4>
<p>Start the installation by issuing the following command from within a terminal:</p>
<pre><code class="lang-sh">docker run -it --rm -v /usr/local/bin:/target \
    emby/embyserver instl
</code></pre>
<p>Optionally, you can also install a systemd service file by executing:</p>
<pre><code class="lang-sh">docker run -it --rm -v /etc/systemd/system:/target  \
    emby/embyserver instl service
</code></pre>
<p>To enable the systemd service for <code>embyserver</code> execute the following:</p>
<pre><code class="lang-sh">sudo systemctl enable embyserver@${USERNAME}
</code></pre>
<h4 id="installation-as-other-user">Installation as other user:</h4>
<p>In the following instructions adjust each command replacing <code>username</code> with the
name of the user you wish to install and run the container as.</p>
<p>To install the application execute and, again, adjust the command replacing
<code>username</code> accordingly.</p>
<pre><code class="lang-sh">docker run -it --rm -v /usr/local/bin:/target \
    -e &quot;APP_USER=username&quot; \
    emby/embyserver instl
</code></pre>
<p>Note, if the user is a system account, the command will need further
adjustment. This is because by default the script stores settings and
configuration in a hidden folder within the executing user's home directory.
This can be overridden by passing the appropriate environment variable
(<code>APP_CONFIG</code>) to the <code>instl</code> script, such as in the example below:</p>
<pre><code class="lang-sh">docker run -it --rm -v /usr/local/bin:/target \
    -e &quot;APP_USER=username&quot; \
    -e &quot;APP_CONFIG=/var/lib/embyserver&quot; \
    emby/embyserver instl
</code></pre>
<p>Optionally, proceed to installing the systemd service:</p>
<pre><code class="lang-sh">docker run -it --rm -v /etc/systemd/system:/target \
   emby/embyserver instl service
</code></pre>
<p>Additionally, you can enable the service on boot by executing:</p>
<pre><code class="lang-sh">sudo systemctl enable embyserver@username.service
</code></pre>
<h3 id="github"><a href="https://github.com/MediaBrowser/Emby.Build">GitHub</a>:</h3>
<p>Installation from GitHub is recommended only for the purposes of
troubleshooting and development. To install from GitHub execute the
following:</p>
<pre><code class="lang-sh">git clone https://github.com/MediaBrowser/Emby.Build
cd docker-containers/stable
make instl
</code></pre>
<p>Additionally, you can install the systemd service file after executing the
above by issuing the following:</p>
<pre><code class="lang-sh">make service
</code></pre>
<h3 id="initial-configuration">Initial Configuration:</h3>
<p>Once the embyserver wrapper script for docker has been installed you just need to
execute the wrapper script from within a terminal:</p>
<pre><code class="lang-sh">emby-server
</code></pre>
<p>On the first run the wrapper script will prompt for system paths that
you wish made accessible from within the container. Enter one path per line.</p>
<h4 id="adding-more-volumes-after-first-run">Adding more volumes after first run:</h4>
<p>Volumes which should be mounted within the container at runtime are kept in the
volume configuration file found under the <code>APP_CONFIG</code> folder on the host. The
location will vary depending on the type of installation.</p>
<p>If the wrapper script was installed as the executing user the volume
configuration file can be found at:
<code>${HOME}/.embyserver/.embyserver.volumes</code>
Otherwise at:
<code>${APP_CONFIG}/.embyserver.volumes</code></p>
<h1 id="maintenance">Maintenance:</h1>
<h2 id="upgrading">Upgrading:</h2>
<p>You can upgrade the version of embyserver found within the container by executing
one of the following commands:</p>
<pre><code class="lang-sh">emby-server update
</code></pre>
<p>Or by executing:</p>
<pre><code class="lang-sh">docker exec emby-server update
</code></pre>
<p>You can update the container itself by executing:</p>
<pre><code class="lang-sh">docker pull emby/embyserver
docker stop emby-server
emby-server
</code></pre>
<p>If you wish the docker container to automatically update upon creation, set the
environment variable <code>EDGE</code> to <code>1</code>. Please read the <code>Technical Details</code> section
for the various ways this can be achieved.</p>
<h2 id="automatic-upgrades">Automatic Upgrades:</h2>
<p>In order to have the container periodically check and upgrade the embyserver binary
one needs to add  a <a href="https://en.wikipedia.org/wiki/Cron"><code>crontab</code></a> entry. Like
so:</p>
<pre><code>echo &quot;0 2 * * * docker exec emby-server update&quot; | sudo tee -a /var/spool/cron/crontabs/root
</code></pre>
<p>or</p>
<pre><code>echo &quot;0 2 * * * emby-server update&quot; | sudo tee -a /var/spool/cron/crontabs/root
</code></pre>
<h2 id="removal">Removal:</h2>
<pre><code class="lang-bash">docker run -it --rm \
  --volume /usr/local/bin:/target \
  emby/embyserver uninstl
</code></pre>
<h2 id="shell-access">Shell Access:</h2>
<p>For debugging and maintenance purposes you may want access the containers
shell. If you are using Docker version <code>1.3.0</code> or higher you can access
a running containers shell by starting <code>bash</code> using <code>docker exec</code>:</p>
<pre><code class="lang-sh">emby-server console
</code></pre>
<h2 id="logs">Logs:</h2>
<pre><code class="lang-sh">emby-server logs
</code></pre>
<h2 id="status-of-service-within-container">Status of service within container:</h2>
<pre><code class="lang-sh">emby-server status
</code></pre>
<h1 id="unraid">unRAID:</h1>
<p>You can find the template for this container on GitHub. Located <a href="https://github.com/hurricanehrndz/container-templates/tree/master/unraid-templates/emby">here</a>.</p>
<h2 id="unraid-installation">unRAID Installation:</h2>
<p>Please navigate to the Docker settings page on unRAID's Web-UI and under repositories add:</p>
<pre><code>https://github.com/MediaBrowser/Emby.Build/tree/master/unraid-templates/emby
</code></pre>
<p>For more information on adding templates to unRAID please visit the <a href="https://lime-technology.com/forum/">unRAID forums</a>.</p>
<h2 id="unraid-automatic-upgrades">unRAID Automatic Upgrades:</h2>
<p>On unRAID, execute the following to have the container periodically update
itself. Additionally, add the same line of code to your <code>go</code> file to make the
change persistent.</p>
<pre><code class="lang-sh">echo &quot;0 2 * * * docker exec emby-server update&quot; | sudo tee -a /var/spool/cron/crontabs/root
</code></pre>
<h1 id="technical-information">Technical information:</h1>
<p>By default the containerized application has been set to run with UID and GID
<code>1000</code>. If using the automatic install method from Docker, the container is set
to run with the UID and GID of of the user executing the <code>embyserver</code> wrapper
script.  Additionally, the wrapper script saves embyserver's configuration and
settings in a hidden sub folder in the executing user's home directory. Most
default settings can be adjusted by passing the appropriate environment
variable. Here is a list of any and all applicable environment variables that
can be override by the end user.</p>
<h2 id="environment-variables">Environment Variables:</h2>
<p>You can adjust some of the default settings set for container/application by
passing any or all of the following environment variable:</p>
<table>
<thead>
<tr>
<th>ENV VAR</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td>APP_USER</td>
<td>Name of user the service will run as.[4]</td>
</tr>
<tr>
<td>APP_UID</td>
<td>UID assigned to APP_USER upon creation, or will query APP_USER's ID.[3]</td>
</tr>
<tr>
<td>APP_GID</td>
<td>GID assigned to APP_USER upon creation, or will query APP_USER's GID.[3]</td>
</tr>
<tr>
<td>APP_CONFIG</td>
<td>Location where application will store settings and database on host.[1]</td>
</tr>
<tr>
<td>APP_GCONFIG</td>
<td>Location where application will store settings and database within guest.[4]</td>
</tr>
<tr>
<td>UMASK</td>
<td>umask assigned to service, default set to 002.[4]</td>
</tr>
<tr>
<td>EDGE</td>
<td>Update the containerized service, default set to 0(Off).[4]</td>
</tr>
</tbody>
</table>
<p>[1]: Variable is applicable only during install.<br>
[2]: Variable is applicable during install, when invoking installed wrapper script or systemd service.<br>
[3]: Variable is applicable only when invoking docker run directly.<br>
[4]: Variable is applicable in all scenarios.</p>
<h3 id="adjusting-variables">Adjusting Variables:</h3>
<p>In order to pass any of the applicable variables during install or when
invoking <code>docker run</code> directly  please read Docker's documentation on <a href="https://docs.docker.com/engine/reference/run/#env-environment-variables">environment variables</a> for clarification if the following examples are not clear.</p>
<p>In the following examples will use the environment variable <code>EDGE</code>. <code>EDGE</code> has
been chosen since it is applicable during all scenarios.</p>
<p>To pass the <code>EDGE</code> variable will invoking <code>docker run</code> append the following
prior to the image name. Any and all other applicable variables can be done in
the same manner.</p>
<pre><code class="lang-sh">--env=EDGE=1
</code></pre>
<p>To pass the environment variable during the other scenarios do so like in one
of the examples below:</p>
<p>From the commandline when calling the wrapper script:</p>
<pre><code>EDGE=1 emby-server
</code></pre>
<p>By adjusting the systemd service:</p>
<pre><code class="lang-ini">[Service]
Type=simple
Environment=EDGE=1
...
</code></pre>
<h2 id="volumes">Volumes:</h2>
<ul>
<li><code>/config</code>  - Folder for configuration and settings.</li>
</ul>
<h1 id="manual-run-and-installation">Manual Run and Installation:</h1>
<p>Of course you can always run the docker image manually. Please be aware that if
you wish your data to remain persistent you need to provide a location for the
<code>/config</code> volume. For example,</p>
<pre><code>docker run -d --net=host -v /*your_config_location*:/config \
                         -e TZ=America/Edmonton
                         --name=emby-server emby/embyserver
</code></pre>
<p>All the information mention previously regarding user UID and GID still applies
when executing a docker run command.</p>
<h2 id="migrating-your-data-from-an-existing-installation">Migrating your data from an existing installation:</h2>
<p>Before proceeding please ensure you have made a backup of your emby data (i.e. <code>tar cvf embydata.tar /var/lib/emby-server</code>). Additionally, please verify that you are mounting your emby data as described above.</p>
<p>In the following example we will demonstrate how to migrate your database using the default setting that emby is deployed with. By default on Linux distributions Emby Server keeps it's data in <code>/var/lib/emby-server</code>, while the Docker container keeps it's data in <code>/config</code>. That being said one could migrate their database as follows:</p>
<pre><code>docker exec -ti emby-server bash
s6-svc -d /run/s6/services/emby-server
migrate_db /config/data/library.db /var/lib/emby-server /config
s6-svc -u /run/s6/services/emby-server
exit
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/EmbySupport/Emby.SupportWeb/blob/master/Emby.SupportWeb/content/support/articles/Docker-Getting-Started.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix sdkversion" id="affix">
                <h5>On this Page</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to Top</a>
            </span>
            2023 © EMBY LLC.  Please see our <a class="lnk" href="https://emby.media/terms.html">terms of use</a> and <a class="lnk" href="https://emby.media/privacy.html">privacy policy</a>.
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../searchIndex.js"></script>
    <script type="text/javascript" src="../../styles/lunr.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
