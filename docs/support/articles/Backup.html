<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Backup | Emby Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Backup | Emby Documentation ">
    <meta name="generator" content="docfx 2.59.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/socialbar.css">
    <link rel="stylesheet" href="../../styles/header.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,100italic,300italic,400italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:uid" content="">
    
    <meta property="docfx:rel" content="../../">
    
    <script type="text/javascript" src="../../nav.js"></script>
    <script type="text/javascript" src="toc.js"></script>
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <div class="mb-socials-heading" style="height: 40px;">
        	<div class="mb-socials-heading-inner container">
        		<div class="mb-socials-heading-right">
        			<div class="mb-socials-list">
                          
        				<div class="mb-socials-item facebook">
        					<a class="mb-socials-item-link" target="_blank" href="https://facebook.com/embyapp"></a>
        					<div class="mb-socials-item-popup">
        						<span>Facebook</span>
        					</div>
        				</div><div class="mb-socials-item twitter">
        					<a class="mb-socials-item-link" target="_blank" href="https://twitter.com/embyapp"></a>
        					<div class="mb-socials-item-popup">
        						<span>Twitter</span>
        					</div>
        				</div>
        				<div class="mb-socials-item pinterest">
        					<a class="mb-socials-item-link" target="_blank" href="https://www.pinterest.com/emby0240/emby-news/"></a>
        					<div class="mb-socials-item-popup">
        						<span>Pinterest</span>
        					</div>
        				</div>
        				<div class="mb-socials-item tumblr">
        					<a class="mb-socials-item-link" target="_blank" href="https://embyapp.tumblr.com/"></a>
        					<div class="mb-socials-item-popup">
        						<span>Tumblr</span>
        					</div>
        				</div>
        				<div class="mb-socials-item github">
        					<a class="mb-socials-item-link" target="_blank" href="https://github.com/MediaBrowser"></a>
        					<div class="mb-socials-item-popup">
        						<span>GitHub</span>
        					</div>
        				</div><div class="mb-socials-item rss">
        					<a class="mb-socials-item-link" target="_blank" href="https://emby.media/blog.xml"></a>
        					<div class="mb-socials-item-popup">
        						<span>RSS</span>
        					</div>
        				</div>
                          
        			</div>
        		</div>
        	</div>
        </div>
        <div class="container">
        	<nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
        		  
        		  <a class="navbar-brand" href="../../index.html">
        		    <img id="logo" class="svg" src="../../images/logo.png" alt="">
        		  </a>
        		  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
        			<span class="sr-only">Toggle navigation</span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
        			<span class="icon-bar"></span>
        		  </button>
        		<div class="collapse navbar-collapse" id="navbar">
        			
        			<ul class="nav level1 navbar-nav">
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/about.html" title="About">About</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/blog.html" title="Blog">Blog</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/download.html" title="Download">Download</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="https://emby.media/premiere.html" title="Emby Premiere">Emby Premiere</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="http://app.emby.media/" title="Sign In">Sign In</a>
        			      </li>
        			      <li class="nav-item">
        			          <a class="nav-link" href="../../support/index.html" title="Support">Support</a>
        			      </li>
        			</ul>		</div>
        	</nav>
        </div>
        <div class="nav-overlay d-none"></div>        
        <div class="subnav navbar navbar-default">
          <div class="container">
            <div class="hide-when-search" id="breadcrumb">
        	  <ul class="breadcrumb">
        		<li></li>
        	  </ul>
        	</div>
        
        	<div class="breadcrumpsearch">
        	  <form class="navbar-form navbar-right" role="search" id="search">
        		<div class="form-group">
        		  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
        		</div>
        	  </form>
        	</div>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1>Backup</h1>
<p>This guide will go over how to migrate your settings from Emby Server from one machine to another. There are two methods to backing up Emby Server settings and we'll go over them here.</p>
<h2 id="use-the-emby-backup-plugin">Use the Emby Backup Plugin</h2>
<p>We recommend using the Emby Backup plugin, which is designed to make this process really painless by doing the work for you. Emby Backup requires Emby Premiere and can be found in our plugin catalog.</p>
<p>The Emby Backup plugin can help you backup and restore the following:</p>
<ul>
<li>Server configuration</li>
<li>Users</li>
<li>User data (playstates, favorites, etc).</li>
<li>Installed plugins</li>
<li>Plugin settings</li>
<li>Playlists</li>
</ul>
<p>This will not backup library contents and metadata. To keep a permanent copy of metadata, we suggest enabling saving of local metadata to media folders.</p>
<h2 id="how-to-use-the-emby-backup-plugin">How to use the Emby Backup Plugin</h2>
<ul>
<li>Be sure your Emby Premiere key is properly installed and validated.  Configuration Backup requires Emby Premiere.</li>
<li>Install the plugin into your existing Emby Server</li>
<li>Configure the Backup plugin by setting a folder to save the backups within.
By default, this process will run every 12 hours and will retain at most 3 backups. You can monitor your folder to see that backups are created.</li>
<li>Install the plugin on your new Emby Server installation, then configure to backup folder to the same folder that contains your backups.</li>
<li>Click on a backup, you'll then be taken to the restore screen where you can run a restore.
You're done !</li>
</ul>
<p>If you prefer to backup manually, read on....</p>
<h2 id="how-to-backup-manually">How to Backup Manually</h2>
<p>The following instructions will detail how to manually backup or migrate an Emby Server installation.</p>
<h3 id="locate-embys-program-data-folder">Locate Emby's program data folder</h3>
<p>Open the server dashboard and expand the System Paths section. Locate the program data folder by referring to the outline in this screenshot.</p>
<p><img src="images/server/programdatapath.png" alt=""></p>
<p>From now on this guide will refer to this path as /ProgramData.</p>
<h3 id="review-paths-on-the-old-setup">Review Paths on the Old Setup</h3>
<p>Take a look at the configuration on your old server instance. Review any paths you've configured into the server such as cache folders, channel download folders, transcoding folders, as well as any paths configured within plugins. The new server will need to be able to reach these paths, and generally will require write access. If this isn't the case, then various components of the new server may have problems. If you're in doubt, revert these settings to their defaults before proceeding.</p>
<h3 id="backup-files">Backup Files</h3>
<p>Shutdown the old server instance and backup the following files and directories:</p>
<ul>
<li>/ProgramData/config</li>
<li>/ProgramData/plugins</li>
<li>/ProgramData/data/collections</li>
<li>/ProgramData/data/playlists</li>
<li>/ProgramData/data/displaypreferences.db/ProgramData/data/userdata_v2.db (if present)</li>
<li>/ProgramData/data/users.db</li>
</ul>
<p>Additionally, backup the library database file, but put it into a separate place from the others. This file will not be copied into your new Emby Server installation, but we will migrate your user data, such as watched data, favorites, etc.
/ProgramData/data/library.db
This will backup saved configurations, installed plugins, collections you've created, playlists, display preferences and the user database.</p>
<p><strong>Note</strong>:  Unless you use a custom Metadata path you will want to backup your /ProgramData/metadata folder to preserve your People images.  The only two folder in metadata you don't need are library and views.</p>
<h3 id="install-emby-server-on-the-new-machine">Install Emby Server on the new machine</h3>
<p>Install Emby on the new machine as you normally would. When the startup wizard launches in the browser, do not complete it and instead shut down the server.</p>
<p>Now take all of the files you backed up from the old server and copy them into the equivalent locations on the new server.</p>
<p>Then launch the new server, sign into the dashboard and setup your library paths. Allow the scan to complete as normal.</p>
<h3 id="after-the-scan">After the Scan</h3>
<p>If your library was configured with identical paths as the old setup then user data will generally be preserved as well as user library permissions. You may still want to review the library access for each user to ensure their channel and folder access is restricted as desired.</p>
<h3 id="restore-user-data">Restore User Data</h3>
<p>Your user data is stored in our old library.db file, and we'll need to run some sql queries to import this into the new library.db in the new Emby Server installation. You'll need a Sqlite database editor such as DB Browser for Sqlite.</p>
<p>You'll need to open the old library.db file, then attach the new library.db file. You can then migrate the data using:
<code>REPLACE INTO NewDB.userdatas SELECT * FROM userdatas</code></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/EmbySupport/Emby.Docs/blob/master/Backup.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix sdkversion" id="affix">
                <h5>On this Page</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to Top</a>
            </span>
            2023 © EMBY LLC.  Please see our <a class="lnk" href="https://emby.media/terms.html">terms of use</a> and <a class="lnk" href="https://emby.media/privacy.html">privacy policy</a>.
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../searchIndex.js"></script>
    <script type="text/javascript" src="../../styles/lunr.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
